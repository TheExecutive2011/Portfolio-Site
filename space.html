<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K9BN1H8ZNG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-K9BN1H8ZNG');
    </script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="resources/CSS/stylesheet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dawning+of+a+New+Day&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
        integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
        integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
    <title>WM - Astrophile</title>
</head>

<body>
    <nav class="navbar">
        <!-- LOGO -->
        <div class="logo">Warren Morrison</div>
        <!-- NAVIGATION MENU -->
        <div class="nav-links">
            <!-- USING CHECKBOX HACK -->
            <input type="checkbox" id="checkbox_toggle" />
            <label for="checkbox_toggle" class="hamburger">&#9776;</label>
            <!-- NAVIGATION MENUS -->
            <div class="menu">
                <div class="menu_item"><a href="index.html">Home</a></div>
                <div class="menu_item"><a href="about.html">About</a></div>
                <div class="menu_item"><a href="resume.html">Resume</a></div>
                <div class="interests menu_item">
                    <a href="WhoAmI.html">Who am I?</a>
                    <!-- DROPDOWN MENU -->
                    <div class="dropdown">
                        <div class="dropdown_item"><a href="AI.html">AI<br>Enthusiast</a></div>
                        <div class="dropdown_item"><a href="space.html">Astrophile</a></div>
                        <div class="dropdown_item"><a href="audiophile.html">Audiophile</a></div>
                        <div class="dropdown_item"><a href="boardgames.html">Board<br>Gamer</a></div>
                        <div class="dropdown_item"><a href="coffee.html">Coffee<br>Aficionado</a></div>
                        <div class="dropdown_item"><a href="discgolf.html">Disc<br>Golfer</a></div>
                        <div class="dropdown_item"><a href="dnd.html">D&D<br>Player</a></div>
                        <div class="dropdown_item"><a href="technologist.html">Technologist</a></div>
                        <div class="dropdown_item"><a href="videogames.html">Video<br>Gamer</a></div>
                        <div class="dropdown_item"><a href="woodworking.html">Woodworker</a></div>
                    </div>
                </div>
                <div class="menu_item"><a href="contact.html">Contact</a></div>
            </div>
            </ul>
    </nav>
    <!-- Beginning of page content -->

    <img src="resources/images/milkyway_alt_edit.jpg" alt="The Milky Way" class="header_image">
    <!-- Content wrapper -->
    <div class="body_text">
        <h1>
            Hello!
        </h1>
        <br>
        <h3>
            My name is Warren Morrison.
        </h3>
        <br>
        <p>
            I'm a developer and am currently working on this portfolio site.
        </p>
        <br>
        <p>
            I'm also an astrophile. Once this page is finished, it will be designed to demonstrate what makes space so
            fascinating to me.
        </p>
        <br>
        <p>
            Captured any inspiring photos from the great beyond lately? <a href="contact.html">Let me know</a>!
        </p>
        <br>
        <p>
            Until this page is finished, here is the current location of the International Space
            Station:
        </p>
        <br>
        <div id="coordinatesContainer">
            <div id="coordRow">
                <div id="coordLabels">
                    <p>Latitude:</p>
                </div>
                <div id="coordNumbers">
                    <p><span id="lat"></span>°</p>
                </div>
            </div>
            <div id="coordRow">
                <div id="coordLabels">
                    <p>Longitude:</p>
                </div>
                <div id="coordNumbers">
                    <p><span id="lon"></span>°</p>
                </div>
            </div>
        </div>
        <br>
        <div id="issMapContainer">
            <div id="issMap"></div>
        </div>
    </div>
    <script>
        // Making a map and tiles
        const mymap = L.map('issMap').setView([0, 0], 6);
        const attribution =
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';

        const tileUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
        const tiles = L.tileLayer(tileUrl, { attribution });
        tiles.addTo(mymap);

        // Making a marker with a custom icon
        const issIcon = L.icon({
            iconUrl: 'resources/images/iss200.png',
            iconSize: [50, 32],
            iconAnchor: [25, 16]
        });
        const marker = L.marker([0, 0], { icon: issIcon }).addTo(mymap);



        const api_url = 'https://api.wheretheiss.at/v1/satellites/25544';

        let firstTime = true;

        // Gets the location of the ISS
        async function getISS() {
            const response = await fetch(api_url);
            const data = await response.json();
            const { latitude, longitude } = data;

            //Sets the marker's location to that of the ISS
            marker.setLatLng([latitude, longitude]);
            if (firstTime) {
                mymap.setView([latitude, longitude], 4);
                firstTime = false;
            }

            // Always set the view to current lat lon and zoom!
            mymap.setView([latitude, longitude], mymap.getZoom());
            marker.setLatLng([latitude, longitude]);


            document.getElementById('lat').textContent = latitude.toFixed(3);
            document.getElementById('lon').textContent = longitude.toFixed(3);
        }

        getISS();

        setInterval(getISS, 5000);
    </script>
</body>

</html>